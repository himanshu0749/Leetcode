class Solution {
    public int numberOfSubmatrices(char[][] grid) {
         int row = grid.length;
        int col = grid[0].length;
        int[][] X = new int[row + 1][col + 1];
        int[][] Y = new int[row + 1][col + 1];
        for (int i = 0; i < row; i++) {
            for (int j = 0; j < col; j++) {
                X[i + 1][j + 1] = X[i + 1][j] + X[i][j + 1] - X[i][j] + (grid[i][j] == 'X' ? 1 : 0);
                Y[i + 1][j + 1] = Y[i + 1][j] + Y[i][j + 1] - Y[i][j] + (grid[i][j] == 'Y' ? 1 : 0);
            }
        }
        int count = 0;
        for (int k = 0; k < row; k++) {
            for (int c = 0; c < col; c++) {
                int numX = X[k + 1][c + 1];
                int numY = Y[k + 1][c + 1];
                if (numX == numY && numX > 0) {
                    count++;
                }
            }
        }
        return count;
    }
}
